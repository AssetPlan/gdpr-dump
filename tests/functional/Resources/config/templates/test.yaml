---
database:
    host: 'mysql'
    name: 'test'
    user: 'test'
    password: 'test'

dump:
    output: 'php://stdout'

variables:
    main_store_id: 'select store_id from stores where code = "store1"'

tables:
    stores:
        orderBy: 'code'
        filters:
            - ['store_id', 'in', [1, 2]]

    customers:
        limit: 3
        filters:
            - ['email', 'like', '%@test.org']
            - ['created_at', 'gt', 'expr: date_sub(now(), interval 60 day)']
        converters:
            email:
                converter: 'randomizeEmail'
                condition: '{{store_id}} == @main_store_id'
            firstname:
                converter: 'anonymizeText'
            lastname:
                converter: 'anonymizeText'

    addresses:
        filters:
            - ['country_id', 'eq', 'FR']
        converters:
            street:
                converter: 'anonymizeText'
            postcode:
                converter: 'randomizeNumber'
            city:
                converter: 'anonymizeText'
